{% extends "core/base.html" %} {% block content %}
<h1 style="font-size: 2.5rem; margin-bottom: 2rem; color: #2c3e50">
  Объявления об автомобилях
</h1>

{% if user.is_authenticated %}
<div style="margin-bottom: 2rem">
  <a
    href="{% url 'core:car_create' %}"
    class="btn btn-success"
    style="font-size: 1.2rem; padding: 0.8rem 1.5rem"
  >
    + Добавить объявление
  </a>
</div>
{% endif %}

<div class="cars-grid">
  {% for car in cars %}
  <div class="car-card">
    {% if car.main_image_url %}
    <img
      src="{{ car.main_image_url }}"
      alt="{{ car.brand }} {{ car.model }}"
      class="car-img"
    />
    {% else %}
    <img
      src="https://via.placeholder.com/600x400?text=Нет+фото"
      alt="Нет фото"
      class="car-img"
    />
    {% endif %}
    <div class="car-body">
      <div class="car-title">
        <a href="{% url 'core:car_detail' car.pk %}">
          {{ car.model }} ({{ car.year }})
        </a>
      </div>
      <div class="car-price">{{ car.price|floatformat:0 }} ₽</div>
      <p><strong>Пробег:</strong> {{ car.mileage|default:"не указан" }} км</p>
      <p style="color: #666; margin-top: 1rem">
        {{ car.description|truncatewords:30 }}
      </p>
    </div>
  </div>
  {% empty %}
  <p
    style="
      grid-column: 1 / -1;
      text-align: center;
      font-size: 1.4rem;
      color: #777;
      margin-top: 3rem;
    "
  >
    Пока нет активных объявлений.
  </p>
  {% endfor %}
</div>
{% endblock %}
